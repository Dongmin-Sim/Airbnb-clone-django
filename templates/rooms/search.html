{% extends 'base.html' %}

{% block page_title %}
    Search
{% endblock %}

{% block search-bar %}
{% endblock %}


{% block content %}
    <h2> Search! </h2>

    <form method="get" action='{% url "rooms:search" %}'>
        <div>
            <label for='city'> City </label>
            <input id="city" value="{{city}}" name='city' placeholder="Search by City" />
        </div>

        <div>
            <label for='country'>Country</label>
            <select id='country' name="country">
                {% for country in countries %}
                    <option value="{{country.code}}" {% if country.code == country_code %} selected {% endif %}>
                        {{country.name}}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div>
            <label for='room_type'>Room Types</label>
            <select id='room_type' name="room_type">
                <option value="0" {% if s_room_type == 0 %} selected {% endif %}>Any kind</option>
                {% for room_type in room_types %}
                    <option value="{{room_type.pk}}" {% if room_type.pk == s_room_type %} selected {% endif %}>{{room_type.name}}</option>
                {% endfor %}
            </select>    
        </div>

        <div>
            <label for='price'>Price</label>
            <input value="{{price}}" type="number" id='price' name="price" placeholder="price">
        </div>

        <div>
            <label for='guests'>Guests</label>
            <input value="{{guests}}" type="number" id='guests' name="guests" placeholder="Guests">
        </div>

        <div>
            <label for='bedrooms'>Bedrooms</label>
            <input value="{{bedrooms}}" type="number" id='bedrooms' name="bedrooms" placeholder="Bedrooms">
        </div>
        
        <div>
            <label for='beds'>Beds</label>
            <input value="{{beds}}" type="number" id='beds' name="beds" placeholder="Beds">
        </div>

        <div> 
            <label for='baths'>Baths</label>
            <input value="{{baths}}" type="number" id='baths' name="baths" placeholder="Baths">
        </div>

        <div> 
            <label for='instant_book'>Instant Book Only?</label>
            <input 
                type="checkbox" id='instant_book' name="instant_book"
                {% if instant_book %}
                checked
                {% endif %}
            />
        </div>

        <div> 
            <label for='superhost'>By Superhost Only?</label>
            <input 
                type="checkbox" id='superhost' name="superhost"
                {% if superhost %}
                checked
                {% endif %}
            />
        </div>

        

        <div>
            <h3>Amenities</h3>
            <ul>
                {% for amenity in amenities %}
                    <li>
                        <label for="a_{{amenity.pk}}">{{amenity.name}}</label>
                        <input 
                            value="{{amenity.pk}}" 
                            type="checkbox" 
                            id="a_{{amenity.pk}}" 
                            name="amenities"
                            {% if amenity.pk|slugify in s_amenities %}
                                checked
                            {% endif %}
                        />
                    </li>
                {% endfor %}
            </ul>
        </div>

        <div>
            <h3>Facilities</h3>
            <ul>
                {% for facility in facilities %}
                    <li>
                        <label for="f_{{facility.pk}}">{{facility.name}}</label>
                        <input 
                            value="{{facility.pk}}" 
                            type="checkbox" 
                            id="a_{{facility.pk}}" 
                            name="facilities"
                            {% if facility.pk|slugify in s_facilities %}
                                checked
                            {% endif %}
                        />
                    </li>
                {% endfor %}
            </ul>
        </div>

        <button>Search</button>

        <div>
            <h3>Results</h3>

            {% if rooms|length == 0 %}
                <h4> No Result </h4>
            {% endif %}

            {% for room in rooms %}
                <h4>{{room.name}}</h4>
            {% endfor %}

        </div>
    </form>
{% endblock %}